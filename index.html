<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="./css/styles.css"/>
  </head>
  <body>
    <h1>welcome to rock paper scissors game</h1>
    <h2>please press f12 on your keyboard then navigate to the 'console' panel</h2>
    <h3>(<mark>to enjoy the game better go to settings>preferences>console and uncheck 'preserve log upon navigation'</mark>)</h3>
    <h2>press play to start!</h2>
    <div id="play" onclick="play()">PLAY</div>
    <div id="replay" title="Play again!" onclick="replay()">&#x1F501;</div>
    <div class="buttons">
      <div id="rock" title="Rock" onclick="game(this.id)">&#x1F44A;</div>
      <div id="paper" title="Paper" onclick="game(this.id)">&#x1F590;</div>
      <div id="scissors" title="Scissors" onclick="game(this.id)">&#x270C;</div>
    </div>
    <script type="text/javascript">
      const whoWins = {
        "rockscissors": "rock",
        "scissorsrock": "rock",
        "paperscissors": "scissors",
        "scissorspaper": "scissors",
        "rockpaper": "paper",
        "paperrock": "paper",
      }

      let roundsCount = 0, playerScore = 0, computerScore = 0, rounds = [];

      const computerPlay = () => {
        let randomNumber = Math.round(Math.random() * 2);
        switch (randomNumber) {
          case 1:
            return "rock";
            break;
          case 2:
            return "paper";
            break;
          default:
            return "scissors"
        }
      };

      const playRound = (playerSelection, computerSelection) => {
        if(whoWins[playerSelection+computerSelection] === playerSelection) {
          playerScore++;
          return {MESSAGE: `You win! ${playerSelection} beats ${computerSelection}`, YOUR_SELECTION: playerSelection, COMPUTER_SELECTION: computerSelection, YOUR_SCORE: playerScore, COMPUTER_SCORE: computerScore};
        } else if(whoWins[playerSelection+computerSelection] === computerSelection) {
          computerScore++;
          return {MESSAGE: `You lose! ${computerSelection} beats ${playerSelection}`, YOUR_SELECTION: playerSelection, COMPUTER_SELECTION: computerSelection, YOUR_SCORE: playerScore, COMPUTER_SCORE: computerScore};
        } else {
          return {MESSAGE: "It's a tie!", YOUR_SELECTION: playerSelection, COMPUTER_SELECTION: computerSelection, YOUR_SCORE: playerScore, COMPUTER_SCORE: computerScore};
        }
      };

      const game = playerSelection => {
        const newRound = playRound(playerSelection, computerPlay());
        rounds = [...rounds, newRound];
        console.clear();
        console.table(rounds);
        roundsCount++;
        if(roundsCount === 5) {
          if(playerScore > computerScore) {
            console.log(`%c Congratulations! You win the game! Your Score: ${playerScore}, Computer Score: ${computerScore}`, "font-size: 32px; color: #ff3333; font-family: 'Major Mono Display', monospace;");
          } else if (playerScore < computerScore) {
            console.log(`%c You lose! Computer wins the game! Your Score: ${playerScore}, Computer Score: ${computerScore}`, "font-size: 32px; color: #ff3333; font-family: 'Major Mono Display', monospace;");
          } else {
            console.log(`%c Tie game! Your Score: ${playerScore}, Computer Score: ${computerScore}`, "font-size: 32px; color: #ff3333; font-family: 'Major Mono Display', monospace;");
          }
          document.getElementsByClassName('buttons')[0].style.visibility = "hidden";
          document.getElementById('replay').style.visibility = "visible";
          document.getElementById('replay').style.position = "relative";
          document.getElementById('replay').style.top = "-50px";
          roundsCount = 0;
          playerScore = 0;
          computerScore = 0;
          rounds = [];
        }
      };

      const play = () => {
        document.getElementById('play').style.visibility = "hidden";
        document.getElementsByClassName('buttons')[0].style.visibility = "visible";
        document.getElementsByClassName('buttons')[0].style.position = "relative";
        document.getElementsByClassName('buttons')[0].style.top = "-150px";
      };

      const replay = () => {
        document.getElementById('replay').style.visibility = "hidden";
        document.getElementsByClassName('buttons')[0].style.visibility = "visible";
        console.clear();
      };
    </script>
  </body>
</html>
